;---------------------------------------------------------------------------------------------------
; Прерывание 1Eh - Таблица параметров дисковода
;
; Внимание: Это не обработчик прерывания, а таблица данных!
; Вектор прерывания 1Eh указывает на эту таблицу параметров дисковода.
; Таблица используется обработчиком int 13h (дисковые операции) для
; настройки контроллера дисковода NEC µPD765 (или совместимого).
;
; Формат таблицы соответствует стандарту IBM PC для 5.25" дисководов
; с двойной плотностью (DD) и емкостью 360 КБ.
;
; Значения таблицы оптимизированы для дисководов МС1502.
;---------------------------------------------------------------------------------------------------
proc    	int_1Eh  far

; ---------------------------------------------------------------------------
; Таблица параметров дисковода (11 байт)
; ---------------------------------------------------------------------------
SrtHdUnld       db      0CFh     ; Шаг времени (SRT) и время выгрузки головки (HUT)
                ; SRT (биты 7-4): Step Rate Time = 12 мс (0x0C)
                ; HUT (биты 3-0): Head Unload Time = 240 мс (0x0F)
                ; 0CFh = 1100 1111b: SRT=12ms (1100b), HUT=240ms (1111b)

DmaHdLd        	db      2       ; Время загрузки головки (HLT) и режим DMA
                ; HLT (биты 7-1): Head Load Time = 4 мс (0x02 * 2 = 4 мс)
                ; DMA (бит 0): 0 = режим DMA, 1 = режим опроса
                ; 02h = 0000 0010b: HLT=4ms, DMA режим

MotorOff        db      25h     ; Задержка выключения мотора (в тиках)
                ; 25h = 37 десятичное * 55 мс ? 2 секунды

SectSize        db      2       ; Размер сектора (код)
                ; 0 = 128 байт, 1 = 256 байт, 2 = 512 байт, 3 = 1024 байт
                ; 2 = 512 байт (стандартный размер сектора)

LastTrack       db      9       ; Последний номер дорожки (максимальная дорожка)
                ; 9 = 9 дорожек на сторону (0-9, всего 10)
                ; Для 40-дорожечного диска значение должно быть 27h (39)

GapLen          db      2Ah     ; Длина промежутка между секторами (GAP3)
                ; при операциях чтения/записи (42 байта)

DTL             db      0FFh    ; Data Transfer Length (длина передачи данных)
                ; Используется только при нестандартном размере сектора
                ; 0FFh = 255 байт (при размере сектора 128 байт)

GapFMT          db      50h     ; Длина промежутка при форматировании (GAP3)
                ; 50h = 80 байт

FullChar        db      0F6h    ; Байт заполнения для форматирования
                ; 0F6h = значение, которым заполняются сектора при форматировании

HDSettle        db      19h     ; Время установки головки (Head Settle Time)
                ; 19h = 25 десятичное * 1 мс = 25 мс

MotorOn         db      4       ; Время включения мотора (Motor Start Time)
                ; 4 * 1/8 секунды = 0.5 секунды

endp    	int_1Eh