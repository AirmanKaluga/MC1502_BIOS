;---------------------------------------------------------------------------------------------------
; Прерывание 11h - Определение конфигурации оборудования
; 
; Функция: Возвращает слово конфигурации оборудования (equipment word)
; Вход:   Нет параметров
; Выход:  AX = слово конфигурации оборудования (битовая маска)
; 
; Описание битов слова конфигурации (стандарт IBM PC):
;   Бит 15-14: Количество подключенных LPT-портов
;   Бит 13:    Не используется (внутренний)
;   Бит 12:    Наличие игрового порта (joystick)
;   Бит 11-9:  Количество подключенных COM-портов
;   Бит 8:     Не используется (внутренний)
;   Бит 7-6:  Количество дисководов (если бит 0 = 1):
;              00 = 1 дисковод, 01 = 2 дисковода, 10 = 3, 11 = 4
;   Бит 5-4:  Начальный видео режим:
;              00 = резерв, 01 = 40x25 цветной, 10 = 80x25 цветной, 11 = 80x25 монохромный
;   Бит 3-2:  Размер ОЗУ на системной плате (только для оригинального PC):
;              00 = 16K, 01 = 32K, 10 = 48K, 11 = 64K
;   Бит 1:    Наличие математического сопроцессора (8087)
;   Бит 0:    Наличие дисковых накопителей (0 = нет, 1 = есть)
; 
; Для МС1502 слово конфигурации хранится в BDA по адресу 040h:010h
;---------------------------------------------------------------------------------------------------
proc		int_11h near
                sti					; Разрешаем прерывания
                push	ds				; Сохраняем регистр DS
                mov	ax, BDAseg			; Загружаем сегмент области данных BIOS (040h)
                mov	ds, ax				; Устанавливаем DS на сегмент BDA
                assume ds:nothing
                
                ; Загружаем слово конфигурации оборудования из BDA (смещение 010h - equip_bits_)
                mov	ax, [ds:equip_bits_]		; AX = слово конфигурации оборудования
                
                pop	ds				; Восстанавливаем исходное значение DS
                assume ds:nothing
                iret					; Возврат из прерывания
endp		int_11h
